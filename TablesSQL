CREATE TABLE permission (
    id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(20),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);


CREATE TABLE status (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(20)
);


CREATE TABLE users (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(20),
    surname VARCHAR(20),
    username VARCHAR(20),
    email VARCHAR(100),
    birthday DATE,
    password VARCHAR(255),
    permission_id INT,
    status INT DEFAULT '0',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (permission_id) REFERENCES permission(id),
    FOREIGN KEY (status) REFERENCES status(id)
);


CREATE TABLE palmares_club (
    id INT AUTO_INCREMENT PRIMARY KEY,
    ucl INT DEFAULT 0,
    championnat INT DEFAULT 0,
    cwc INT DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);


CREATE TABLE palmares_country (
    id INT AUTO_INCREMENT PRIMARY KEY,
    wc INT DEFAULT 0,
    titres_continentaux INT DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);


CREATE TABLE palmares_player (
    id INT AUTO_INCREMENT PRIMARY KEY,
    bo INT DEFAULT 0,
    ucl INT DEFAULT 0,
    wc INT DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);


CREATE TABLE continent (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(20),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);


CREATE TABLE country (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(20),
    continent_id INT,
    palmares INT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (continent_id) REFERENCES continent(id),
    FOREIGN KEY (palmares) REFERENCES palmares_country(id),
    FOREIGN KEY (coach) REFERENCES coach(id)
);


CREATE TABLE coach (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(20),
    surname VARCHAR(20),
    birthday DATE,
    nationnality INT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (nationnality) REFERENCES country(id)
);


CREATE TABLE club (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(20),
    country_id INT,
    palmares INT,
    coach_id INT,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (country_id) REFERENCES country(id),
    FOREIGN KEY (palmares) REFERENCES palmares_club(id),
    FOREIGN KEY (coach_id) REFERENCES coach(id)
);



CREATE TABLE player (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(20),
    surname VARCHAR(20),
    birthday DATE,
    club INT,
    nationnality INT,
    palmares INT,
    post VARCHAR(20),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (nationnality) REFERENCES country(id),
    FOREIGN KEY (club) REFERENCES club(id),
    FOREIGN KEY (palmares) REFERENCES palmares_player(id)
);